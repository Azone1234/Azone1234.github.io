<!DOCTYPE html>
<html>
<head>
  <title>News sites</title>
  <meta name="Viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="site.css">
<script src="https://storage.googleapis.com/feednami-static/js/feednami-client-v1.0.1.js"></script>
  <script>

      window.onload = function() {
        // functions that run after page loads
        displayGreeting();
        fetchWeather();
        displayRSSFeed();
      }
      // display good morning, afternoon or evening based on the time
      function displayGreeting() {
        var date = new Date();
        var hour = date.getHours();
        var description = "";
        if (hour < 12) {
          description = "morning";
        } else if (hour < 17) {
          description = "afternoon";
        } else {
          description = "evening";
        }
        document.getElementById("greeting").innerHTML = "Good " + description;
      }
      // get weather data from openweathermap and display the current temp
      function fetchWeather() {
        fetch("https://api.openweathermap.org/data/2.5/weather?zip=85701,US&appid=8c00fafdf6b858768c60931ca3652337&units=imperial")
        .then(function(resp) { return resp.json() })
        .then(function(data) {
          document.getElementById("weather").innerHTML = "It is currently "+data.main.temp+"&#176;"+" in Tucson, AZ";
        })
        .catch(function() {
          document.getElementById("weather").innerHTML = "Error in fetchWeather function";
        });
      }



      function displayRSSFeed() {
       // fetch an RSS feed and display the title and description
       var origURL = 'http://feeds.bbci.co.uk/news/education/rss.xml';
       // feednami doesn't like & so replace with %26
       var replacedURL = origURL.replace(/&/g, "%26");
       feednami.load(replacedURL,function(result) {
         if (result.error) {
           console.log(result.error);
         } else {
           var entries = result.feed.entries
           for (var i = 0; i < entries.length; i++) {
             var entry = entries[i];
             let divElement = '<div class="rss_title"><a href="' + entry.link + '" target="_blank">' + entry.title + '</a></div><div class="rss_description">' + entry.description + '</div>';
             document.getElementById("rss_items").innerHTML += divElement;
           }
         }
       });
     }
    </script>
</head>
<body>
  <div id="greeting"></div>
      <div id="weather"></div>
      <div id="rss_items"></div>
<center>
    <div class="name_container">
     <h3>Abdulwahab Alhuraiti</h3>
    </div>

    <div class="content_container">
      <div class="image_container">

      <img src="https://tucson.com/app/images/ua/storm.jpg"/>
    </div>
    <div class="bio_container">
      I am 22 years old. I am major in political science. Also, I am minor in Journalism. I am from Kuwait.
    </div>
    <div class="clear"></div>
  </div>

  <div class="news_container">
    <div class="newstitle">

      <h1>News sites</h1>
    </div>


    <div class="newssite"><a href="https://www.foxnews.com/" target="_blank">Foxnews</a></div>
    <div class="newssite"><a href="https://www.newtimes.co.rw/" target="_blank">The newtimes</a></div>


    <div class="newssite"><a href="https://www.cbc.ca/" target="_blank">CBC</a></div>
      <div class="newssite"><a href="https://www.forbes.com/#7543a9d12254" target="_blank">Forbes</a></div>

  <div class="newssite"><a href="https://edition.cnn.com/" target="_blank">CNN</a></div>
    <div class="newssite"><a href="https://www.bbc.co.uk/" target="_blank">BBC</a></div>


  </div>
</center>
</body>
</html>
